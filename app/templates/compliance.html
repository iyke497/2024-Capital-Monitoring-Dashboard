{% extends "layout.html" %}

{% block title %}Eyemark - Compliance{% endblock %}
{% block header %}MDA Compliance Metrics{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/compliance.css') }}">
{% endblock %}

{% block content %}
    <!-- Tab Navigation -->
    <div class="row">
        <div class="twelve columns">
            <ul class="tab-nav">
                <li><a href="#" class="button tab-link active" onclick="showTab('mda-tab')">MDA Level</a></li>
                <li><a href="#" class="button tab-link" onclick="showTab('ministry-tab')">Ministry Level</a></li>
            </ul>
        </div>
    </div>

    <!-- MDA Tab -->
    <div id="mda-tab" class="tab-content">
        <h3 id="mda-title">Project Compliance per MDA</h3>
        <table id="mda-table" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>MDA Name</th>
                    <th>Parent Ministry</th>
                    <th>Expected (Budget 2024)</th>
                    <th>Reported (Survey)</th>
                    <th>Total Submissions</th>
                    <th>Compliance Rate (%)</th>
                </tr>
            </thead>
        </table>
    </div>

    <!-- Ministry Tab -->
    <div id="ministry-tab" class="tab-content" style="display:none;">
        <h3>Ministry Summary Info</h3>
        <table id="ministry-table" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>Ministry Name</th>
                    <th>Reporting MDAs</th>
                    <th>Total Responses</th>
                    <th>Total Appropriation (2024)</th>
                    <th>Avg. Completion (%)</th>
                </tr>
            </thead>
        </table>
    </div>

    <!-- Project Details Modal -->
    <div id="project-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h4 id="modal-title">MDA Project Details</h4>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="modal-summary" style="margin-bottom: 20px;">
                    <p><strong>MDA:</strong> <span id="modal-mda-name"></span></p>
                    <p><strong>Expected Projects:</strong> <span id="modal-expected"></span></p>
                    <p><strong>Reported Projects:</strong> <span id="modal-reported"></span></p>
                    <p><strong>Compliance Rate:</strong> <span id="modal-compliance"></span></p>
                </div>
                <div class="table-container">
                    <table id="project-details-table" class="project-table">
                        <thead>
                            <tr>
                                <th>Project Code</th>
                                <th>Project Title</th>
                                <th>Budget Allocation (â‚¦)</th>
                                <th>Reporting Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button class="button button-primary" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/compliance.js') }}"></script>
{% endblock %}